<% content_for :channels do %>
  <%= javascript_pack_tag 'channels/lobby' %>
<% end %>

<div id="roomId" data-room-id="<%= @room_id %>"></div>

<div class="row lobby-container m-0 p-0">
  <div class="col-8 qrcode-container">
    <div>
      <h5>Scan QR code</h5>
      <p>Scan this QR code to join the lobby.</p>
      <div class="qrcode-wrapper"><%= raw @QRCSVG %></div>
      <p>--------- 0r ----------</p>
      <p><%= @new_player_url %></p>
    </div>
  </div>

  <div class="col-4 lobby-wrapper">
  <h1 class="text-center">Lobby</h1>
  <h3 class="text-center"><%= @room.name %></h3>
    <div id="users">
      <h3>Players</h3>
      <div id="userList" class="lobby-playerList">
        <% @room.players.each do |player| %>
          <%= render partial: 'shared/player_large', locals: { player: player } %>
        <% end %>
        <% if @room.players.empty? %>
          <p>Wating for players to join.</p>
        <% end %>
      </div>
    </div>
    <%= link_to 'Start', room_show_main_path(room_id: @room.room_id), class: 'btn btn-primary lobby-button' %>
  </div>

</div>

<script>
  let playerIconStyle = `<%= render partial: 'shared/player_large', locals: { player: Player.last } %>`
</script>
